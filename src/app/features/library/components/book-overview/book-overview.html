<mat-card class="ovr-card mat-elevation-z3">
  @if (book) {
    <!-- Cover -->
    <div class="cover-wrap">
      <img
        [src]="getCorrectCover(book)"
        (error)="onImageError($event)"
        [alt]="book.title"
        loading="lazy"
      />
    </div>

    <!-- Title / meta -->
    <div class="title-block">
      <h1 class="title" [title]="book.title">{{ book.title }}</h1>
      <div class="meta">
        <mat-icon aria-hidden="true">person</mat-icon>
        <span>{{ book.author }}</span>
        @if (book.year) {
          <span class="dot">•</span>
          <span>{{ book.year }}</span>
        }
        @if (book.genre) {
          <span class="dot">•</span>
          <span class="badge">{{ book.genre }}</span>
        }
      </div>
    </div>

    <mat-divider class="divider"></mat-divider>

    <!-- Description (mock if empty) -->
    <section class="section">
      <h3 class="section-title">
        <mat-icon>menu_book</mat-icon>
        Overview
      </h3>
      <p class="desc">
        {{ book.description || mockDescription }}
      </p>
    </section>

    <mat-divider class="divider"></mat-divider>

    <!-- Actions -->
    <div class="actions">
      <a mat-raised-button color="primary" [routerLink]="['/library','books', book.id]">
        <mat-icon>edit</mat-icon>&nbsp;Edit
      </a>
      <a mat-button routerLink="/library/books">
        <mat-icon>arrow_back</mat-icon>&nbsp;Back to list
      </a>
    </div>
  } @else {
    <div class="loading">
      <mat-progress-spinner mode="indeterminate" diameter="48"></mat-progress-spinner>
    </div>
  }
</mat-card>